!function(){i();let e,t=[],n=[],a=[],o=[],c=[];async function i(){try{const l=s(),u=`http://appunasam.devor/integrante/getParticipaciones?id=${l}&idGrupo=${function(){const e=new URLSearchParams(window.location.search);return grupo=Object.fromEntries(e.entries()),grupo.id}()}`,m=await fetch(u),p=await m.json();t=p.invitaciones,n=p.participaciones,a=p.beneficios,o=p.beneficiosAsignados,c=p.rendimientos,function(){if(d("#cuerpo-part"),0===n.length){const e=document.querySelector("#cuerpo-part"),t=document.createElement("TR"),n=document.createElement("TD");return n.textContent="Todavia no ha participado en alguna invitación ",t.appendChild(n),void e.appendChild(t)}const e=document.getElementById("cuerpo-part");n.forEach(t=>{const a=document.createElement("TR"),o=document.createElement("TD");o.textContent=t.nombreEvento;const c=document.createElement("TD");c.textContent=t.tipo;const d=document.createElement("TD"),s=document.createElement("BUTTON");s.classList.add("boton-asignar"),s.dataset.idParticipacion=t.id,s.onclick=function(){!function(e){Swal.fire({title:"Eliminar participación?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const{id:t}=e,a=new FormData;a.append("id",t);try{const t="http://appunasam.devor/integrante/deleteAsistencia",o=await fetch(t,{method:"POST",body:a}),c=await o.json();c&&(Swal.fire("Eliminado!",c.mensaje,"success"),n=n.filter(t=>t.id!==e.id),i())}catch(e){Swal.fire({icon:"error",title:"Error...",text:"Hubo un error al eliminar!"})}}(e)})}({...t})};const r=document.createElement("I");r.classList.add("fas"),r.classList.add("fa-minus-circle");const l=document.createElement("SPAN");l.textContent=" Quitar",s.appendChild(r),s.appendChild(l),d.appendChild(s),a.appendChild(o),a.appendChild(c),a.appendChild(d),e.appendChild(a)})}(),function(n=!0){if(0===t.length){const e=document.querySelector("#cuerpo-inv"),t=document.createElement("TR"),n=document.createElement("TD");return n.textContent="Todavia no existen invitaciones",t.appendChild(n),void e.appendChild(t)}d("#cuerpo-inv");const a=document.getElementById("cuerpo-inv");t.forEach(t=>{const n=document.createElement("TR"),o=document.createElement("TD");o.textContent=t.evento;const c=document.createElement("TD");c.textContent=t.fecha_hora;const d=document.createElement("TD"),l=document.createElement("SPAN");l.classList.add("label"),"CUMPLIDA"===t.est&&l.classList.add("label-ok"),l.textContent=t.est,d.appendChild(l);const u=document.createElement("TD");u.textContent=t.observacion;const m=document.createElement("TD"),p=document.createElement("BUTTON");p.classList.add("boton-asignar"),p.dataset.idInv=t.id,p.onclick=function(){!function(t){e=t;document.querySelector("#btn-as").classList.add("asignar-asis");const n=document.getElementById("modal-asistencia"),a=document.getElementsByClassName("close-asis")[0];r(n,a),n.addEventListener("click",(function(t){if(t.target.classList.contains("asignar-asis")){!function(e){if(""===e.trim())return!0}(document.querySelector("#tipo-part").value)?(t.target.classList.remove("asignar-asis"),async function(e){const t=document.querySelector("#tipo-part").value;datos=new FormData,idAl=s(),datos.append("invitacion_id",e.id),datos.append("alumno_x_grupo_id",idAl),datos.append("tipo",t);try{const t="http://appunasam.devor/integrante/setAsistencia",n=await fetch(t,{method:"POST",body:datos}),a=await n.json();if(a.tipo){const t=document.querySelector("#modal-asistencia");setTimeout(()=>{t.style.display="none"},2e3),Swal.fire("ÉXITO!",a.mensaje,"success");String(a.id),e.evento;i()}else Swal.fire("MENSAJE!",a.mensaje,"info")}catch(e){Swal.fire({icon:"error",title:"Error...",text:"Hubo un error al guardar la asistencia!"})}}(e)):Swal.fire("Mensaje!","El campo es obligatorio","warning")}}))}({...t})};const f=document.createElement("I");f.classList.add("fas"),f.classList.add("fa-plus-circle");const h=document.createElement("SPAN");h.textContent=" Asignar Asistencia",p.appendChild(f),p.appendChild(h),m.appendChild(p),n.appendChild(o),n.appendChild(c),n.appendChild(d),n.appendChild(u),n.appendChild(m),a.appendChild(n)})}(),function(){if(d("#cuerpo-der"),0===a.length){const e=document.querySelector("#cuerpo-der"),t=document.createElement("TR"),n=document.createElement("TD");return n.textContent="No tiene derecho a ningun beneficio",t.appendChild(n),void e.appendChild(t)}const e=document.querySelector("#cuerpo-der");a.forEach(t=>{const n=document.createElement("TR"),a=document.createElement("TD");a.textContent=t.nombreBen;const o=document.createElement("BUTTON");o.classList.add("boton-asignar"),o.dataset.idDer=t.id,o.onclick=function(){!function(e){document.querySelector("#btn_confirmarBen").classList.add("btn_confirmarBen");const t=document.getElementById("modal-asigBeneficio"),n=document.getElementsByClassName("close-ben")[0];r(t,n),t.addEventListener("click",(function(t){t.target.classList.contains("btn_confirmarBen")&&(t.target.classList.remove("btn_confirmarBen"),async function(e){const t=document.querySelector("#descripcion"),n=document.querySelector("#est-ben-asig"),a=s();datos=new FormData,datos.append("beneficio_x_tipo_grupo_id",e.id),datos.append("alumno_x_grupo_id",a),datos.append("descripcion",t.value),datos.append("estado",n.value);try{const a="http://appunasam.devor/integrante/setBeneficio",o=await fetch(a,{method:"POST",body:datos}),c=await o.json();if(c.resultado){Swal.fire({icon:"success",title:"MUY BIEN !",text:"Beneficio asignado correctamente!"});String(c.id),e.nombreBen,t.value,n.value,c.fecha;i()}else Swal.fire({icon:"error",title:"Error",text:"El Beneficio ya fue asignado!"})}catch(e){Swal.fire({icon:"error",title:"Error...",text:"Hubo un error al guardar la beneficio!"})}}(e))}))}({...t})};const c=document.createElement("TD"),d=document.createElement("I");d.classList.add("fas"),d.classList.add("fa-plus-circle");const l=document.createElement("SPAN");l.textContent=" Asignar ",o.appendChild(d),o.appendChild(l),c.appendChild(o),n.appendChild(a),n.appendChild(c),e.appendChild(n)})}(),function(){if(d("#cuerpo-ben"),0===o.length){const e=document.querySelector("#cuerpo-ben"),t=document.createElement("TR"),n=document.createElement("TD");return n.textContent="Todavia no se asigno un beneficio",t.appendChild(n),void e.appendChild(t)}const e=document.querySelector("#cuerpo-ben");o.forEach(t=>{const n=document.createElement("TR"),a=document.createElement("TD");a.textContent=t.nombreBeneficio;const o=document.createElement("TD");o.textContent=t.descripcion;const c=document.createElement("TD");c.textContent=t.fecha_efectiva;const d=document.createElement("TD"),s=document.createElement("BUTTON");s.classList.add("btn-asignar"),s.classList.add("label"),s.dataset.idParticipacion=t.id,"COMPLETADO"==t.estado&&s.classList.add("label-ok"),s.textContent=t.estado,s.onclick=function(){!async function(e){const{id:t}=e;datos=new FormData,datos.append("id",t);try{const e="http://appunasam.devor/integrante/updBeneficioEst",t=await fetch(e,{method:"POST",body:datos});await t.json();Swal.fire({icon:"success",title:"MUY BIEN !",text:"Estado actualizado correctamente!"}),i()}catch(e){Swal.fire({icon:"error",title:"Error...",text:"Hubo un error al actualizar el estado !"})}}({...t})};const r=document.createElement("BUTTON");r.classList.add("btn-asignar"),r.classList.add("label");const l=document.createElement("I");l.classList.add("fas"),l.classList.add("fa-minus-circle");const u=document.createElement("SPAN");u.textContent=" QUITAR ",r.onclick=function(){!async function(e){Swal.fire({title:"Eliminar Beneficio?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const{id:t}=e;datos=new FormData,datos.append("id",t);try{const e="http://appunasam.devor/integrante/eliminar-beneficio",t=await fetch(e,{method:"POST",body:datos});await t.json()&&(Swal.fire({icon:"success",title:"Eliminado !"}),i())}catch(e){Swal.fire({icon:"error",title:"Error...",text:"Hubo un error al eliminar !"})}}(e)})}({...t})},r.appendChild(l),r.appendChild(u);const m=document.createElement("DIV");m.classList.add("acciones-tab"),m.appendChild(s),m.appendChild(r),d.appendChild(m),n.appendChild(a),n.appendChild(o),n.appendChild(c),n.appendChild(d),e.appendChild(n)})}()}catch(e){console.log(e)}}function d(e){const t=document.querySelector(e);for(;t.firstChild;)t.removeChild(t.firstChild)}function s(){return document.querySelector("#idAlumnoGrupo").value}function r(e,t){e.style.display="block",t.onclick=function(){e.style.display="none"}}var l=1;function u(e){var t,n=document.getElementsByClassName("mySlides"),a=document.getElementsByClassName("btn-slide");for(e>n.length&&(l=1),e<1&&(l=n.length),t=0;t<n.length;t++)n[t].style.display="none";for(t=0;t<a.length;t++)a[t].className=a[t].className.replace(" active","");n[l-1].style.display="block",a[l-1].className+=" active"}u(l)}();